<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>API Examples</title>
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/default.min.css">
    <!-- JavaScript -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
</head>
<body>
    <article>
        <h1>API Examples</h1>
        <p>On these pages I have put together several examples of accessing various APIs and retrieving data. You will note that they are all <em>very</em> similar to each other. They are all using the <code>XMLHttpRequest</code> object, and only differ slightly in the URL that is being called, the parameters that are supplied, and sometimes some of the method parameters. The basic structure of these calls is as below:
        <pre>
            <code>
                // Function that will process the response from the API
                var processResponse = function() {
                    var data = JSON.parse(this.response);
                    // Replace this code with code that
                    // does something with the response
                    console.log(data);
                }

                // Function to ensure parameters used in request are encoded correctly
                var encodeParameters = function(params) {
                    // join all key value pairs and store in an array
                    var strArray = [];
                    for(var key in params) {
                        if(params.hasOwnProperty(key)) {
                            var paramString = encodeURIComponent(key) + &quot;=&quot; + encodeURIComponent(params[key]);
                            strArray.push(paramString);
                        }
                    }
                    // join everything in the array together
                    return strArray.join(&quot;&amp;&quot;);
                }

                // the parameters for the API request
                var parameters = {
                    lat: 51.4816,
                    lng: 3.1791,
                }

                // construct the URL to call
                var base_url = &apos;http://api.sunrise-sunset.org/json&apos;;
                var query_url = base_url + &apos;?&apos; + encodeParameters(parameters);
                console.log(query_url);

                // create an XMLHttpRequest object, add a listener to
                // tell it what to do if successful, tell it which URL
                // to GET, and then make (&apos;send&apos;) the call
                var xhttp = new XMLHttpRequest();
                xhttp.addEventListener(&apos;load&apos;, processResponse);
                xhttp.open(&apos;GET&apos;, query_url);
                xhttp.send();
            </code>
        </pre>
        <p>None of these examples represent a complete enough example to pass Coursework 2. Further work will be needed to add functionality and data presentation on top of these examples in order to get a pass mark.</p>
        <h2>Examples and Instructions</h2>
        <ul>
            <li><a href="examples/sunrise/">Sunrise &amp; Sunset</a></li>
            <li><a href="examples/spotify/">Spotify</a></li>
            <!-- <li><a href="google_books.html">Google Books API</a></li>
            <li><a href="cs50-food.html">CS50 Food API</a></li>
            <li><a href="strava.html">Strava API</a></li>
            <li><a href="google_url_shortener.html">Google URL Shortener API</a></li>
            <li><a href="bands_in_town.html">Bands in Town API</a></li>
            <li><a href="city_grid.html">City Grid API</a></li>
            <li><a href="guardian_api.html">Guardian API</a></li> -->
        </ul>
    </article>
    <script>
         hljs.initHighlightingOnLoad();
    </script>
</body>
</html>
